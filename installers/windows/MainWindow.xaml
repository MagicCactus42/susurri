<Window x:Class="Susurri.Installer.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Susurri Installer"
        Height="550"
        Width="750"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize"
        Background="{StaticResource BackgroundBrush}">

    <Grid>
        <!-- Left Panel - Branding -->
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="260"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <Border Grid.Column="0" Background="{StaticResource SurfaceBrush}">
            <StackPanel VerticalAlignment="Center" Margin="30">
                <TextBlock Text="Susurri"
                           FontSize="32"
                           FontWeight="Bold"
                           Foreground="{StaticResource PrimaryBrush}"
                           Margin="0,0,0,10"/>
                <TextBlock Text="Secure P2P Chat"
                           FontSize="14"
                           Foreground="{StaticResource TextSecondaryBrush}"
                           Margin="0,0,0,30"/>
                <TextBlock Text="End-to-end encrypted messaging with DHT-based peer discovery and onion routing."
                           FontSize="12"
                           Foreground="{StaticResource TextSecondaryBrush}"
                           TextWrapping="Wrap"
                           LineHeight="20"
                           Margin="0,0,0,20"/>
                <TextBlock Text="Includes:"
                           FontSize="12"
                           FontWeight="SemiBold"
                           Foreground="{StaticResource TextBrush}"
                           Margin="0,0,0,8"/>
                <TextBlock Text="- Desktop GUI Application"
                           FontSize="11"
                           Foreground="{StaticResource TextSecondaryBrush}"/>
                <TextBlock Text="- Command-Line Interface"
                           FontSize="11"
                           Foreground="{StaticResource TextSecondaryBrush}"/>
            </StackPanel>
        </Border>

        <!-- Right Panel - Installation Steps -->
        <Grid Grid.Column="1" Margin="40">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Step Indicator -->
            <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,30">
                <Ellipse x:Name="Step1Indicator" Width="12" Height="12" Fill="{StaticResource PrimaryBrush}"/>
                <Rectangle Width="40" Height="2" Fill="{StaticResource TextSecondaryBrush}" VerticalAlignment="Center" Margin="8,0"/>
                <Ellipse x:Name="Step2Indicator" Width="12" Height="12" Fill="{StaticResource TextSecondaryBrush}"/>
                <Rectangle Width="40" Height="2" Fill="{StaticResource TextSecondaryBrush}" VerticalAlignment="Center" Margin="8,0"/>
                <Ellipse x:Name="Step3Indicator" Width="12" Height="12" Fill="{StaticResource TextSecondaryBrush}"/>
            </StackPanel>

            <!-- Content Area -->
            <Grid Grid.Row="1">
                <!-- Step 1: Welcome -->
                <StackPanel x:Name="WelcomePanel" Visibility="Visible">
                    <TextBlock Text="Welcome to Susurri"
                               FontSize="24"
                               FontWeight="SemiBold"
                               Foreground="{StaticResource TextBrush}"
                               Margin="0,0,0,15"/>
                    <TextBlock Text="This wizard will install Susurri on your computer."
                               FontSize="14"
                               Foreground="{StaticResource TextSecondaryBrush}"
                               Margin="0,0,0,30"/>

                    <TextBlock Text="Components to install:"
                               FontSize="13"
                               FontWeight="SemiBold"
                               Foreground="{StaticResource TextBrush}"
                               Margin="0,0,0,10"/>

                    <CheckBox x:Name="InstallGuiCheckbox"
                              Content="Desktop Application (GUI)"
                              IsChecked="True"
                              IsEnabled="False"
                              Foreground="{StaticResource TextBrush}"
                              Margin="0,5,0,0"/>
                    <CheckBox x:Name="InstallCliCheckbox"
                              Content="Command-Line Interface (CLI)"
                              IsChecked="True"
                              Foreground="{StaticResource TextBrush}"
                              Margin="0,5,0,0"/>

                    <TextBlock Text="Options:"
                               FontSize="13"
                               FontWeight="SemiBold"
                               Foreground="{StaticResource TextBrush}"
                               Margin="0,20,0,10"/>

                    <CheckBox x:Name="CreateShortcutCheckbox"
                              Content="Create desktop shortcut"
                              IsChecked="True"
                              Foreground="{StaticResource TextBrush}"
                              Margin="0,5,0,0"/>
                    <CheckBox x:Name="LaunchOnStartupCheckbox"
                              Content="Launch on Windows startup"
                              IsChecked="False"
                              Foreground="{StaticResource TextBrush}"
                              Margin="0,5,0,0"/>
                </StackPanel>

                <!-- Step 2: Installation Path -->
                <StackPanel x:Name="PathPanel" Visibility="Collapsed">
                    <TextBlock Text="Installation Location"
                               FontSize="24"
                               FontWeight="SemiBold"
                               Foreground="{StaticResource TextBrush}"
                               Margin="0,0,0,15"/>
                    <TextBlock Text="Choose where to install Susurri:"
                               FontSize="14"
                               Foreground="{StaticResource TextSecondaryBrush}"
                               Margin="0,0,0,20"/>

                    <Grid Margin="0,0,0,20">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <TextBox x:Name="InstallPathTextBox"
                                 Grid.Column="0"
                                 Background="{StaticResource SurfaceBrush}"
                                 Foreground="{StaticResource TextBrush}"
                                 BorderThickness="0"
                                 Padding="12,10"
                                 FontSize="13"
                                 VerticalContentAlignment="Center"/>
                        <Button Grid.Column="1"
                                Content="Browse..."
                                Style="{StaticResource SecondaryButton}"
                                Padding="16,10"
                                Margin="10,0,0,0"
                                Click="BrowseButton_Click"/>
                    </Grid>

                    <TextBlock x:Name="SpaceRequiredText"
                               Text="Space required: ~200 MB"
                               FontSize="12"
                               Foreground="{StaticResource TextSecondaryBrush}"/>
                    <TextBlock x:Name="SpaceAvailableText"
                               Text="Space available: Calculating..."
                               FontSize="12"
                               Foreground="{StaticResource TextSecondaryBrush}"
                               Margin="0,5,0,0"/>
                </StackPanel>

                <!-- Step 3: Installing / Complete -->
                <StackPanel x:Name="InstallingPanel" Visibility="Collapsed">
                    <TextBlock x:Name="InstallingTitle"
                               Text="Installing..."
                               FontSize="24"
                               FontWeight="SemiBold"
                               Foreground="{StaticResource TextBrush}"
                               Margin="0,0,0,15"/>
                    <TextBlock x:Name="InstallingStatus"
                               Text="Preparing installation..."
                               FontSize="14"
                               Foreground="{StaticResource TextSecondaryBrush}"
                               Margin="0,0,0,30"/>

                    <ProgressBar x:Name="InstallProgress"
                                 Height="8"
                                 Minimum="0"
                                 Maximum="100"
                                 Value="0"
                                 Background="{StaticResource SurfaceBrush}"
                                 Foreground="{StaticResource PrimaryBrush}"
                                 BorderThickness="0"/>

                    <TextBlock x:Name="ProgressPercentage"
                               Text="0%"
                               FontSize="12"
                               Foreground="{StaticResource TextSecondaryBrush}"
                               HorizontalAlignment="Right"
                               Margin="0,10,0,0"/>

                    <!-- Installation Summary (shown after complete) -->
                    <StackPanel x:Name="InstallSummaryPanel" Visibility="Collapsed" Margin="0,20,0,0">
                        <TextBlock Text="Installed Components:"
                                   FontSize="13"
                                   FontWeight="SemiBold"
                                   Foreground="{StaticResource TextBrush}"
                                   Margin="0,0,0,8"/>
                        <TextBlock x:Name="InstalledComponentsList"
                                   FontSize="12"
                                   Foreground="{StaticResource TextSecondaryBrush}"
                                   TextWrapping="Wrap"/>
                    </StackPanel>
                </StackPanel>
            </Grid>

            <!-- Navigation Buttons -->
            <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right">
                <Button x:Name="CancelButton"
                        Content="Cancel"
                        Style="{StaticResource SecondaryButton}"
                        Margin="0,0,10,0"
                        Click="CancelButton_Click"/>
                <Button x:Name="BackButton"
                        Content="Back"
                        Style="{StaticResource SecondaryButton}"
                        Visibility="Collapsed"
                        Margin="0,0,10,0"
                        Click="BackButton_Click"/>
                <Button x:Name="NextButton"
                        Content="Install"
                        Style="{StaticResource PrimaryButton}"
                        Click="NextButton_Click"/>
            </StackPanel>
        </Grid>
    </Grid>
</Window>
